<VirtualHost *:80>

    CustomLog /dev/null common

    DocumentRoot    "/var/www/html/web"
    DirectoryIndex  app.php

    <Directory "/var/www/html/web">
        AllowOverride None
        Allow from All

        <IfModule mod_rewrite.c>
            Options -MultiViews
            RewriteEngine On

            RewriteCond %{HTTP_HOST} ^opositatest\.com$
            RewriteRule ^ https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]


            RewriteRule ^oposiciones/cuerpo-superior-de-secretarios-judiciales-turno-libre$ /oposiciones/letrados-administracion-justicia-turno-libre [L,R=301,NC]
            RewriteRule ^oposiciones/cuerpo-superior-de-secretarios-judiciales-turno-libre/materias/([a-zA-Z\-_\.]*)$ /oposiciones/letrados-administracion-justicia-turno-libre/materias/$1 [L,R=301,NC]
            RewriteRule ^oposiciones/cuerpo-superior-de-secretarios-judiciales-turno-libre/materias/([a-zA-Z\-_\.]*)/temas/tema-([0-9]+)-([0-9]+)$ /oposiciones/letrados-administracion-justicia-turno-libre/materias/$1/temas/tema-$2-$3 [L,R=301,NC]
            RewriteRule ^subscribir/oposicion/cuerpo-superior-de-secretarios-judiciales-turno-libre$ /subscribir/oposicion/letrados-administracion-justicia-turno-libre [L,R=301,NC]

            RewriteRule ^oposiciones/cuerpo-superior-de-secretarios-judiciales-promocion-interna$ /oposiciones/letrados-administracion-justicia-promocion-interna [L,R=301,NC]
            RewriteRule ^oposiciones/cuerpo-superior-de-secretarios-judiciales-promocion-interna/materias/([a-zA-Z\-_\.]*)$ /oposiciones/letrados-administracion-justicia-promocion-interna/materias/$1 [L,R=301,NC]
            RewriteRule ^oposiciones/cuerpo-superior-de-secretarios-judiciales-promocion-interna/materias/([a-zA-Z\-_\.]*)/temas/tema-([0-9]+)-([0-9]+)$ /oposiciones/letrados-administracion-justicia-promocion-interna/materias/$1/temas/tema-$2-$3 [L,R=301,NC]
            RewriteRule ^subscribir/oposicion/cuerpo-superior-de-secretarios-judiciales-promocion-interna$ /subscribir/oposicion/letrados-administracion-justicia-promocion-interna [L,R=301,NC]



            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteRule ^(.*)$ app.php [QSA,L]
        </IfModule>
    </Directory>

    KeepAlive            On
    MaxKeepAliveRequests 200
    KeepAliveTimeout     5

    <IfModule mod_filter.c>
        AddOutputFilterByType DEFLATE "application/atom+xml" \
                                      "application/javascript" \
                                      "application/json" \
                                      "application/rss+xml" \
                                      "application/x-javascript" \
                                      "application/xhtml+xml" \
                                      "application/xml" \
                                      "image/svg+xml" \
                                      "text/css" \
                                      "text/html" \
                                      "text/javascript" \
                                      "text/plain" \
                                      "text/xml"
    </IfModule>

    <IfModule mod_headers.c>
        Header append Vary User-Agent env=!dont-vary

        ExpiresActive On
        ExpiresDefault "now plus 1 week"
        ExpiresByType image/x-icon "now plus 1 month"
        ExpiresByType image/gif    "now plus 1 month"
        ExpiresByType image/png    "now plus 1 month"
        ExpiresByType image/jpeg   "now plus 1 month"
    </IfModule>
</VirtualHost>